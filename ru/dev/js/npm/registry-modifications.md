---
title: Редактирование реестра NPM
---

# Регистрация и аутентификация

Для начала работы с реестром NPM необходимо завести в нем учетную 
запись или авторизоваться, если учетная запись уже заведена. 
Это можно сделать с помощью команды `npm adduser`, которая позволит
ввести данные пользователя в интерактивном режиме.

# Публикация пакета

Публикация пакета не требует каких-либо предварительных действий по 
сборке (если только этого не требует сам пакет). Для публикации пакета
достаточно перейти в директорию с `package.json` (или указать эту 
директорию первым аргументом команды) и выполнить команду 
`npm publish`, которая заархивирует и передаст пакет в реестр NPM.

При публикации пакета можно указать тег, который ему будет проставлен.
По умолчанию это `latest`, который используется клиентами реестра NPM
для вычисления последней версии пакета. В том случае, если по каким-то 
причинам последняя опубликованная версия пакета не является последней,
это может вызвать неожиданное поведение:

```
$ git checkout 1.7.4
$ npm publish
$ git checkout 1.3.2
$ npm publish
# latest теперь соответствует 1.3.2
```

Способ решения такой проблемы будет описан ниже.

Также при публикации пакета можно указать его степень видимости с 
помощью ключа `--access`:

```
$ npm publish --access restricted
# или
$ npm publish --access public
```

Центральный реестр NPM (npmjs.org) по умолчанию принимает scoped-пакеты
как приватные, поэтому для публикации OSS scoped-пакета необходимо 
указывать `--access public` 

# Работа с тегами пакета

Для того, чтобы установить тег пакету, можно воспользоваться командой
`npm dist-tag add`:

```
$ npm dist-tag add @ama-team/package@1.7.4 latest
```

Эта команда присвоит (или перенест) тег latest версии `1.7.4` пакета 
`@ama-team/package` (решая описанную в предыдущих секциях проблему).

Полный список тегов можно посмотреть командой `npm dist-tag ls`:

```
$ npm dist-tag ls glob
latest: 7.1.1
legacy: 4.5.3
```

В случае, если тег отжил свое и более не нужен, его можно удалить:

```
$ npm dist-tag rm @ama-team/package most-working-version
```

Подобная команда удалит тег `most-working-version` у пакета 
`@ama-team/package`.